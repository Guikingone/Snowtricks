before_script:
    - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD

stages:
  - test
  - performances
  - build
  - frontend
  - deploy

test:
    stage: test
    image: guikingone/test-env
    before_script:
        - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
    script:
        - phpunit -v
        - echo "performances tests"

performances:
   stage: performances
   image: guikingone/test-env
   before_script:
       - docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD
   script:
       - phpunit -v
       - echo "performances tests"

build:
  stage: build
  script: echo "Building the app"

frontend:
  stage: frontend
  script: echo "Frontend check"

deploy_staging:
  stage: deploy
  script: echo "Deploy to staging server"
